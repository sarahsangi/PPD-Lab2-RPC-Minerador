syntax = "proto3";

package main;

// Estrutura usada para respostas inteiras simples
message IntegerResponse {
    int32 value = 1;
}

// Estrutura usada para enviar dados completos de uma transação
message SolutionData {
    int32 status = 1;
    string solution = 2;
    int32 challenge = 3;
}

// Identifica uma transação pelo seu ID
message TransactionID {
    int32 transactionId = 1;
}

// Estrutura usada quando o cliente envia uma tentativa de solução
message ChallengeArgs {
    int32 transactionId = 1;
    int32 clientId = 2;
    string solution = 3;
}

// Mensagem vazia usada em algumas chamadas
message Void {}

service api {
    rpc getTransactionID(Void) returns (IntegerResponse);
    rpc getChallenge(TransactionID) returns (IntegerResponse);
    rpc getTransactionStatus(TransactionID) returns (IntegerResponse);
    rpc submitChallenge(ChallengeArgs) returns (IntegerResponse);
    rpc getWinner(TransactionID) returns (IntegerResponse);
    rpc getSolution(TransactionID) returns (SolutionData);

}
